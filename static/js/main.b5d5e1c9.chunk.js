(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{66:function(e,t,a){e.exports=a(79)},71:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(71),a(72),a(120)),l=a(43),u=a(14),s=a(123),p=a(122),d=a(118),m=a(16),f=a(23),v=a.n(f),y="https://dataservice.accuweather.com/",h="meh4YIGLseh5ukPM65GSiJDUXjre8Wix";function b(){var e=Object(m.c)((function(e){return e.locations})),t=Object(m.b)();return{locations:e,addLocation:Object(n.useCallback)((function(e){return t(function(e){return{type:"ADD_LOCATION",payload:e}}(e))}),[t]),removeLocation:Object(n.useCallback)((function(e){return t(function(e){return{type:"REMOVE_LOCATION",payload:e}}(e))}),[t])}}var E=function(){var e=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],o=Object(m.b)(),c=Object(m.c)((function(e){return e.autocomplete})),i=Object(m.c)((function(e){return e.loading})),l=Object(n.useCallback)(v.a.debounce((function(e){return o({type:"API",payload:{url:"locations/v1/cities/autocomplete",queryParams:{q:e},onSuccess:function(e){return{type:"ShowLocations",payload:e}},onFailure:function(e){return{type:"toast",payload:e.message||e}}}})}),500),[o]);return{query:a,search:function(e){r(e),l(e)},list:c,loading:i}}(),t=e.list,a=e.loading,o=e.search,c=Object(n.useState)(""),i=Object(u.a)(c,2),f=i[0],y=i[1],h=b(),E=h.locations,O=h.addLocation,g=h.removeLocation;return r.a.createElement(s.a,{multiple:!0,filterSelectedOptions:!0,autoComplete:!0,style:{width:300},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.LocalizedName},options:t,loading:a,value:E,onChange:function(e,t){return v.a.difference(t,E).forEach((function(e){return O(e)})),v.a.difference(E,t).forEach((function(e){return g(e)})),E},inputValue:f,onInputChange:function(e,t,a){y(t),"input"===a&&o(t)},renderInput:function(e){return r.a.createElement(p.a,Object.assign({},e,{label:"Search City...",variant:"outlined",InputProps:Object(l.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,a?r.a.createElement(d.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))}})},O=a(124),g=a(121);var j=a(119),I=a(50),T=a.n(I);function S(e){var t=e.location,a=function(e){var t=Object(m.b)(),a=Object(n.useState)(null),r=Object(u.a)(a,2),o=r[0],c=r[1],i=Object(m.c)((function(e){return e.locationsToForecastsMap}));return Object(n.useEffect)((function(){t(function(e){return function(e){var t=e.url,a=e.body,n=void 0===a?void 0:a,r=e.urlParams,o=void 0===r?[]:r,c=e.queryParams,i=void 0===c?{}:c,l=e.method;return{type:"API",payload:{url:t,body:n,urlParams:o,queryParams:i,method:void 0===l?"GET":l,onSuccess:e.onSuccess,onFailure:e.onFailure}}}({url:"currentconditions/v1/",urlParams:[e.Key],onSuccess:function(t){return{type:"SET_LOCATION_FORECAST",payload:{location:e,forecast:t}}}})}(e))}),[e,t]),Object(n.useEffect)((function(){var t;c(null===(t=i.get(e))||void 0===t?void 0:t[0])}),[i.size,e,i]),o}(t),o=t.LocalizedName,c=function(e){if(!e)return null;var t=e.WeatherIcon;return"https://developer.accuweather.com/sites/default/files/".concat((t<10?"0":"")+t,"-s.png")}(a);if(!a)return r.a.createElement(j.a,null);var l=a.LocalObservationDateTime,s=a.WeatherText,p=a.IsDayTime,d=a.Temperature.Metric,f=d.Value,v=d.Unit,y=T.a.parseZone(l).format("ddd, MMM Do, HH:mm");return r.a.createElement(O.a,null,r.a.createElement(O.a.Body,null,r.a.createElement(O.a.Img,{variant:"top",src:c,style:{maxWidth:"10em"}}),r.a.createElement(O.a.Title,null,o),r.a.createElement(O.a.Subtitle,{style:{color:"#7c7c7c"}},s),r.a.createElement(i.a,{container:!0,spacing:2},r.a.createElement(i.a,{item:!0},y),r.a.createElement(i.a,{item:!0},r.a.createElement(g.a,{variant:p?"light":"dark"},p?"Day":"Night"))),r.a.createElement(O.a.Text,null,r.a.createElement("strong",null,f,v))))}var A=function(){var e=b().locations;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{container:!0,style:{margin:"4vh 2vw"}},r.a.createElement(i.a,{container:!0,item:!0,style:{marginBottom:"1vh"},alignContent:"stretch",alignItems:"stretch"},r.a.createElement(i.a,{item:!0},r.a.createElement(E,null))),r.a.createElement(i.a,{container:!0,item:!0,spacing:2},e.map((function(e){return r.a.createElement(i.a,{item:!0,key:e.Key},r.a.createElement(S,{key:e.Key,location:e}))})))),r.a.createElement("footer",null,"Made with ",r.a.createElement("span",{style:{color:"#f00"}},"\u2764")," by Idan Izicovich"))},P=a(27),k=a(52),w=a(38),L=a.n(w),C=a(53),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new URL(e,y);return t.forEach((function(e){n=new URL(e,n)})),n.searchParams.set("apikey",h),Object.entries(a).forEach((function(e){var t=Object(u.a)(e,2),a=t[0],r=t[1];n.searchParams.set(a,r)})),n},R=a(54),_={locations:[],loading:!1,error:null,autocomplete:[],locationsToForecastsMap:new Map},x=Object(P.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;return Object(R.a)(e,(function(e){switch(t.type){case"ADD_LOCATION":e.locations.push(t.payload);break;case"API_START":e.loading=!0;break;case"API_END":e.loading=!1;break;case"API_ERROR":console.log("setting error:",t.payload),e.error=t.payload;break;case"ShowLocations":e.autocomplete=t.payload;break;case"REMOVE_LOCATION":e.locations=v.a.remove(e.locations,(function(e){return t.payload===e})),e.locationsToForecastsMap.delete(t.payload);break;case"SET_LOCATION_FORECAST":var a=t.payload,n=a.location,r=a.forecast;e.locationsToForecastsMap.set(n,r)}}))}),Object(k.composeWithDevTools)(Object(P.applyMiddleware)((function(e){var t=e.getState,a=e.dispatch;return function(e){return function(n){return"function"===typeof n?n(a,t):e(n)}}}),(function(e){e.getState;var t=e.dispatch;return function(e){return function(){var a=Object(C.a)(L.a.mark((function a(n){var r,o,c,i,l,u,s,p,d,m,f,v,y;return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e(n),"API"===n.type){a.next=3;break}return a.abrupt("return");case 3:return a.prev=3,t({type:"API_START"}),r=n.payload,o=r.url,c=r.body,i=r.urlParams,l=void 0===i?[]:i,u=r.queryParams,s=void 0===u?{}:u,p=r.method,d=void 0===p?"GET":p,m=r.onSuccess,f=r.onFailure,a.next=8,fetch(M(o,l,s),{method:d.toUpperCase(),body:JSON.stringify(c),mode:"cors",cache:"no-cache",credentials:"same-origin"});case 8:if(!(v=a.sent).ok){a.next=16;break}return a.next=12,v.json();case 12:y=a.sent,m&&t(m(y)),a.next=17;break;case 16:f&&t(f(v.status));case 17:a.next=23;break;case 19:a.prev=19,a.t0=a.catch(3),console.log("[api middleware]:",a.t0),t({type:"API_ERROR",payload:a.t0});case 23:return a.prev=23,t({type:"API_END"}),a.finish(23);case 26:case"end":return a.stop()}}),a,null,[[3,19,23,26]])})));return function(e){return a.apply(this,arguments)}}()}}))));c.a.render(r.a.createElement(m.a,{store:x},r.a.createElement(A,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.b5d5e1c9.chunk.js.map